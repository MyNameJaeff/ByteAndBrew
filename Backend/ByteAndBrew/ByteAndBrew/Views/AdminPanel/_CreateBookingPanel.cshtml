@model ByteAndBrew.Dtos.Booking.BookingAndCustomerCreateDto

<form action="/AdminPanel/CreateBooking" method="post" class="bg-blue-50 p-6 rounded-xl shadow-md">
    @Html.AntiForgeryToken()
    <h3 class="text-lg font-semibold text-gray-800 mb-4">
        <i class="fas fa-calendar-plus mr-2 text-blue-600"></i>Create New Booking
    </h3>

    <!-- Error Display -->
    <div id="form-errors" class="hidden mb-4 p-4 bg-red-50 border border-red-200 rounded-lg">
        <ul class="text-red-600 text-sm list-disc list-inside"></ul>
    </div>

    <!-- Customer Info -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div>
            <label asp-for="Name" class="block text-gray-700 font-medium mb-2">Customer Name *</label>
            <input asp-for="Name" type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
            <span asp-validation-for="Name" class="text-red-500 text-sm"></span>
        </div>
        <div>
            <label asp-for="PhoneNumber" class="block text-gray-700 font-medium mb-2">Phone Number *</label>
            <input asp-for="PhoneNumber" type="tel" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
            <span asp-validation-for="PhoneNumber" class="text-red-500 text-sm"></span>
        </div>
    </div>

    <!-- Booking Info -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div>
            <label asp-for="TableId" class="block text-gray-700 font-medium mb-2">Select Table *</label>
            <select asp-for="TableId" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" id="tableSelect" required>
                <option value="">-- Select Table --</option>
                @if (ViewBag.Tables != null)
                {
                    @foreach (var table in (IEnumerable<SelectListItem>)ViewBag.Tables)
                    {
                        <option value="@table.Value" selected="@table.Selected">@table.Text</option>
                    }
                }
            </select>
            <span asp-validation-for="TableId" class="text-red-500 text-sm"></span>
        </div>
        <div>
            <label asp-for="NumberOfGuests" class="block text-gray-700 font-medium mb-2">Number of Guests *</label>
            <input asp-for="NumberOfGuests" type="number" min="1" max="20" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
            <span asp-validation-for="NumberOfGuests" class="text-red-500 text-sm"></span>
        </div>
    </div>

    <div class="mb-4">
        <label class="block text-gray-700 font-medium mb-2">Select Date *</label>
        <input type="date" id="bookingDate" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent" required />
    </div>

    <div class="mb-6" id="timeSlotContainer">
        <p class="text-gray-500">Please select a table and date to view available time slots.</p>
    </div>

    <!-- Hidden input for StartTime -->
    <input asp-for="StartTime" type="hidden" id="hiddenBookingDateTime" />

    <div class="flex gap-2">
        <button type="submit" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed">
            <i class="fas fa-save mr-2"></i>Create Booking
        </button>
        <button type="button" onclick="closeQuickForm(this)" class="px-4 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors duration-200">
            Cancel
        </button>
    </div>
</form>

<script>
    function closeQuickForm(button) {
        const container = button.closest('.quick-form-container');
        const triggerButton = container.previousElementSibling;
        container.classList.add('hidden');
        container.innerHTML = '';
        triggerButton.disabled = false;
    }
</script>